# Миграция схемы для версий документов

## Описание изменений

Изменена схема таблицы `chessboard_documentation_mapping` для работы с версиями документов:

- Поле `documentation_id` переименовано в `version_id`
- Теперь таблица ссылается напрямую на `documentation_versions` вместо `documentations`
- Каждая запись в шахматке привязана к конкретной версии документа (шифр + версия)

## Применение миграции

```bash
psql "$DATABASE_URL" -f sql/add_version_to_chessboard_documentation_mapping.sql
```

## Изменения в коде

1. Обновлен интерфейс `DbRow` для новой структуры данных
2. Изменены запросы данных для джойна через `documentation_versions`
3. Обновлена логика сохранения для работы с `version_id`
4. Добавлена обязательная проверка выбора версий перед сохранением

## Требования к пользователям

- Версия документа должна быть выбрана через кнопку "Версии" перед добавлением/редактированием строк
- Без выбора версии сохранение записей невозможно