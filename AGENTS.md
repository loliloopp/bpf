# Руководство для AGENTS

## Контекст проекта
- **BlueprintFlow** — портал для анализа рабочей документации и сметного отдела строительного генподрядчика.
- Команда более 200 сотрудников; решение должно масштабироваться.
- **Стек**: React + TypeScript + Vite, дизайн‑система Ant Design 5 и подход Vibe, управление состоянием через TanStack Query.
- **Back‑end**: Supabase (PostgreSQL 16, Storage, Edge Functions, Realtime WebSocket).
- **Аутентификация**: Supabase Auth c поддержкой OAuth 2 (Google, Microsoft) и MFA.
- **Наблюдаемость**: Sentry, Grafana Cloud, OTEL.

## Принципы разработки
- Mobile‑first, соответствие WCAG 2.1 AA.
- Оптимистические блокировки и резолвер конфликтов при совместном редактировании.
- Модерновый, отзывчивый UI с Ant Design 5/Vibe.
- Подготовка к нагрузке: импорт 5 000 строк ≤ 30 с, рендер 10 000 строк ≤ 100 мс, 100 одновременных пользователей, latency < 300 мс.

## Функциональные ориентиры
- Импорт ВОР, смет и шахматок из Excel/CSV; хранение исходных файлов в Supabase Storage.
- Предпросмотр PDF/DWG/XLS/DOC, drag‑and‑drop загрузка до 250 МБ.
- Onboarding‑wizard и AI‑подсказки (Codex).
- Дашборд аналитики (win‑rate, динамика затрат) и история действий.

## Код и стиль
- Писать только на **TypeScript** с строгой типизацией.
- Использовать функциональные компоненты React и хуки; для данных — TanStack Query.
- Компоненты — `PascalCase`, переменные и функции — `camelCase`.
- Не хранить секреты и сгенерированные артефакты в репозитории.
- Все таблицы обязаны иметь сортировку и фильтры в заголовках столбцов.
- Элементы управления в строках таблиц создавайте в виде иконок без текста.

## Git‑процесс
- Работать в ветках, отправлять изменения через Pull Request.
- Сообщения коммитов в формате Conventional Commits (`feat:`, `fix:`, `chore:` и т.д.).
- Обновляйте документацию и при необходимости ссылку на `tech_task.md`.

## Проверки перед коммитом
- Запустить `npm run lint` и исправить все предупреждения.
- Запустить `npm run build` и убедиться, что проект собирается.

## Развертывание
- FE — GitHub Actions → Vercel; BE — Supabase Cloud.
- Настроить Sentry и Grafana Cloud; MTTR ≤ 5 мин.

## Дополнительно
- Основной редактор: **WebStorm**.
- Для подробных требований и бенчмарков см. `tech_task.md`.
- Никогда не использовать RLS (Row Level Security).
