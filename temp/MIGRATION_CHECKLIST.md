# –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

## ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–ó–ê–í–ï–†–®–ï–ù–û)

- [x] –°–æ–∑–¥–∞–Ω—ã SQL —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
  - [x] Step 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
  - [x] Step 2: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - [x] Step 3: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  - [x] Rollback —Å–∫—Ä–∏–ø—Ç
- [x] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  - [x] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ SQL –º–∏–≥—Ä–∞—Ü–∏–∏
  - [x] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é TypeScript
  - [x] –û–±—â–µ–µ —Ä–µ–∑—é–º–µ –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
psql "$DATABASE_URL" -f sql/refactor_detail_cost_categories_CORRECT_step1_create_structure.sql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –¢–∞–±–ª–∏—Ü–∞ `detail_cost_categories_new` —Å–æ–∑–¥–∞–Ω–∞ (–±–µ–∑ `cost_category_id`)
- [ ] –¢–∞–±–ª–∏—Ü–∞ `detail_cost_categories_mapping` —Å–æ–∑–¥–∞–Ω–∞ (—Ç—Ä–æ–π–Ω–∞—è —Å–≤—è–∑—å)
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –≤—ã–≤–æ–¥–µ

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
NOTICE: –®–∞–≥ 1 –∑–∞–≤–µ—Ä—à—ë–Ω: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î —Å–æ–∑–¥–∞–Ω–∞
NOTICE: –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞: detail_cost_categories_new (–ë–ï–ó cost_category_id)
NOTICE: –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞: detail_cost_categories_mapping (—Ç—Ä–æ–π–Ω–∞—è —Å–≤—è–∑—å)
```

---

### –®–∞–≥ 2: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```bash
psql "$DATABASE_URL" -f sql/refactor_detail_cost_categories_CORRECT_step2_migrate_data.sql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –í `detail_cost_categories_new` 172 –∑–∞–ø–∏—Å–∏ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞)
- [ ] –í `detail_cost_categories_mapping` 218 —Å–≤—è–∑–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω–∞
- [ ] –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ 46 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
NOTICE: –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∏–¥–æ–≤ –∑–∞—Ç—Ä–∞—Ç: 172 (–±—ã–ª–æ 218 –∑–∞–ø–∏—Å–µ–π, 172 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–º—ë–Ω)
NOTICE: –°–æ–∑–¥–∞–Ω–æ —Ç—Ä–æ–π–Ω—ã—Ö —Å–≤—è–∑–µ–π –≤ –º–∞–ø–ø–∏–Ω–≥–µ: 218
NOTICE: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω–∞: –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
NOTICE: –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: 46 –∑–∞–ø–∏—Å–µ–π
```

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å:**
```sql
SELECT
    (SELECT COUNT(*) FROM detail_cost_categories_new) as new_count,
    (SELECT COUNT(DISTINCT name) FROM detail_cost_categories_new) as unique_names,
    (SELECT COUNT(*) FROM detail_cost_categories_mapping) as mapping_count;
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: new_count = unique_names = 172, mapping_count = 218
```

- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º

---

### –®–∞–≥ 3: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
psql "$DATABASE_URL" -f sql/refactor_detail_cost_categories_CORRECT_step3_replace_tables.sql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –¢–∞–±–ª–∏—Ü–∞ `detail_cost_categories_old` —Å–æ–∑–¥–∞–Ω–∞ (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞)
- [ ] –¢–∞–±–ª–∏—Ü–∞ `detail_cost_categories` –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
- [ ] Sequence –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω
- [ ] FK constraints –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
NOTICE: –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ detail_cost_categories_old
NOTICE: –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –∫–∞–∫ detail_cost_categories
NOTICE: Sequence –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ detail_cost_categories_id_seq
NOTICE: –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
NOTICE: –ó–∞–ø–∏—Å–µ–π –≤ detail_cost_categories: 172 (–±—ã–ª–æ: 218)
NOTICE: –¢—Ä–æ–π–Ω—ã—Ö —Å–≤—è–∑–µ–π –≤ –º–∞–ø–ø–∏–Ω–≥–µ: 218
```

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º—ë–Ω:**
```sql
SELECT COUNT(*) as total, COUNT(DISTINCT name) as unique_names
FROM detail_cost_categories;
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: total = unique_names = 172
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã:**
```sql
SELECT column_name, data_type
FROM information_schema.columns
WHERE table_name = 'detail_cost_categories'
ORDER BY ordinal_position;
-- –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: cost_category_id, location_id
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥:**
```sql
SELECT COUNT(*) as mapping_count,
       COUNT(DISTINCT detail_cost_category_id) as unique_details,
       COUNT(DISTINCT cost_category_id) as unique_categories,
       COUNT(DISTINCT location_id) as unique_locations
FROM detail_cost_categories_mapping;
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: mapping_count = 218
```

4. **–ü—Ä–∏–º–µ—Ä—ã —Ç—Ä–æ–π–Ω—ã—Ö —Å–≤—è–∑–µ–π:**
```sql
SELECT
    cc.name AS category_name,
    dc.name AS detail_name,
    l.name AS location_name
FROM detail_cost_categories_mapping m
JOIN cost_categories cc ON m.cost_category_id = cc.id
JOIN detail_cost_categories dc ON m.detail_cost_category_id = dc.id
JOIN location l ON m.location_id = l.id
ORDER BY cc.name, dc.name, l.name
LIMIT 10;
```

- [ ] –í—Å–µ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ TypeScript –∫–æ–¥–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω —Ñ–∞–π–ª `src/pages/references/CostCategories.tsx`
- [ ] –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: **1125 —Å—Ç—Ä–æ–∫** (–ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 600 —Å—Ç—Ä–æ–∫)
- [ ] –†–µ—à–µ–Ω–æ: —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º.

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

–°–º. `temp/TYPESCRIPT_UPDATE_INSTRUCTIONS.md`

- [ ] –û–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DetailCategory`
  - [ ] –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `costCategoryId`
  - [ ] –ò–∑–º–µ–Ω–µ–Ω–æ –ø–æ–ª–µ `locations` –Ω–∞ `mappings`
  - [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `mappings`: `costCategoryId`, `costCategoryName`, `locationId`, `locationName`

- [ ] –û–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DetailCategoryRowDB`
  - [ ] –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `cost_category_id`
  - [ ] –ò–∑–º–µ–Ω–µ–Ω–æ –ø–æ–ª–µ `detail_cost_categories_location_mapping` –Ω–∞ `detail_cost_categories_mapping`
  - [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ –º–∞–ø–ø–∏–Ω–≥: `cost_category_id`, `cost_categories`, `location_id`, `location`

- [ ] –û–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `TableRow` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥ "–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞ —Ç—Ä–æ–π–Ω—É—é —Å–≤—è–∑—å")

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤

- [ ] –ò–∑–º–µ–Ω—ë–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `detail_categories`
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ `detail_cost_categories_mapping`
  - [ ] JOIN —Å `cost_categories` –∏ `location`
  - [ ] –£–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ `cost_category_id` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ

- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mappings` –≤–º–µ—Å—Ç–æ `locations`
  - [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã `costCategoryId` –∏ `costCategoryName` –≤ –∫–∞–∂–¥—ã–π mapping

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–∏–¥–∞ –∑–∞—Ç—Ä–∞—Ç
  - [ ] –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `detail_cost_categories` (–ë–ï–ó `cost_category_id` –∏ `location_id`)
  - [ ] –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å —Ç—Ä–æ–π–Ω—É—é —Å–≤—è–∑—å –≤ `detail_cost_categories_mapping`

- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∞ –∑–∞—Ç—Ä–∞—Ç
  - [ ] –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è (`name`, `description`, `unit_id`)
  - [ ] –ù–ï –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è `cost_category_id` –∏ `location_id`

- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–æ–π–Ω–æ–π —Å–≤—è–∑–∏
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–æ–π–Ω–æ–π —Å–≤—è–∑–∏

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

- [ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `flatMap` –ø–æ `mappings`
  - [ ] –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã = –æ–¥–Ω–∞ —Ç—Ä–æ–π–Ω–∞—è —Å–≤—è–∑—å

- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - [ ] –§–∏–ª—å—Ç—Ä –ø–æ `categoryId`
  - [ ] –§–∏–ª—å—Ç—Ä –ø–æ `detailId`
  - [ ] –§–∏–ª—å—Ç—Ä –ø–æ `locationId`

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Excel –∏–º–ø–æ—Ä—Ç–∞

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ "–Ω–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å" –≤–∏–¥ –∑–∞—Ç—Ä–∞—Ç
- [ ] –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è/–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –≤–∏–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç—Ä–æ–π–Ω–∞—è —Å–≤—è–∑—å

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º—ë–Ω –≤ `detail_cost_categories`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–µ–π –≤ `detail_cost_categories_mapping` (218)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã —Ç—Ä–æ–π–Ω—ã—Ö —Å–≤—è–∑–µ–π

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI

- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞—Ç—Ä–∞—Ç"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≤–∏–¥ –∑–∞—Ç—Ä–∞—Ç
- [ ] –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≤–∏–¥ –∑–∞—Ç—Ä–∞—Ç
- [ ] –£–¥–∞–ª–∏—Ç—å –≤–∏–¥ –∑–∞—Ç—Ä–∞—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –≤–∏–¥–∞–º –∑–∞—Ç—Ä–∞—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è–º

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Excel –∏–º–ø–æ—Ä—Ç–∞

- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π Excel —Ñ–∞–π–ª
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–∏–¥–æ–≤ –∑–∞—Ç—Ä–∞—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–æ–π–Ω—ã—Ö —Å–≤—è–∑–µ–π

---

## üéØ –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### –û—á–∏—Å—Ç–∫–∞

- [ ] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)
  - [ ] `sql/refactor_detail_cost_categories_step1_create_structure.sql`
  - [ ] `sql/refactor_detail_cost_categories_step2_migrate_data.sql`
  - [ ] `sql/refactor_detail_cost_categories_step3_replace_tables.sql`

- [ ] –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
  - [ ] `sql/check_duplicates.sql`
  - [ ] `sql/check_table_structure.sql`
  - [ ] `sql/check_name_across_categories.sql`
  - [ ] `sql/debug_new_table_duplicates.sql`
  - [ ] `sql/solution_option1_unique_per_category.sql`
  - [ ] `sql/solution_option2_global_unique_with_suffix.sql`

- [ ] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É –ë–î (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
```sql
DROP TABLE IF EXISTS detail_cost_categories_old CASCADE;
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ `temp/` –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## üìù –ó–∞–º–µ—Ç–∫–∏

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:** 2025-10-05
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** _____________

**–ü—Ä–æ–±–ª–µ–º—ã:**
-

**–†–µ—à–µ–Ω–∏—è:**
-

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- [ ] TypeScript –∫–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É–¥–∞–ª–µ–Ω–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ
