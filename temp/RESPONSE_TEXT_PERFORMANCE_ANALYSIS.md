# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ response.text()

## –ü–†–û–ë–õ–ï–ú–ê
–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `response.text()` –∑–∞–Ω–∏–º–∞–µ—Ç 62890–º—Å (62+ —Å–µ–∫—É–Ω–¥—ã) –¥–ª—è –æ—Ç–≤–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–º 4493 —Å–∏–º–≤–æ–ª–∞ (4.4KB), —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º–æ –¥–æ–ª–≥–æ.

## –ü–†–ò–ß–ò–ù–´ –ú–ï–î–õ–ï–ù–ù–û–ì–û –ß–¢–ï–ù–ò–Ø

### 1. –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –±–∞–≥ —Å AbortSignal.timeout()
**–ü—Ä–æ–±–ª–µ–º–∞**: –í Chrome/Edge –µ—Å—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–π –±–∞–≥ –≥–¥–µ `AbortSignal.timeout()` –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å–∞–Ω–∏–µ `response.text()`
- **–°–∏–º–ø—Ç–æ–º—ã**: –ó–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (661–º—Å), –Ω–æ —á—Ç–µ–Ω–∏–µ response –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ 60+ —Å–µ–∫—É–Ω–¥
- **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã**: Chrome, Edge (Chromium-based)
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: AbortSignal.timeout() –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç AbortError –≤–º–µ—Å—Ç–æ TimeoutError

### 2. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö AbortSignal
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ external signal (React Query) + AbortSignal.timeout() —Å–æ–∑–¥–∞–µ—Ç race conditions
- **–≠—Ñ—Ñ–µ–∫—Ç**: response.text() –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
- **–û—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è**: –ü—Ä–∏ –º–∞–ª–µ–Ω—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–∞—Ö –≥–¥–µ —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

### 3. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —É—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —á—Ç–µ–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –º–µ—Ç–æ–¥–∞ —á—Ç–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
- **Overhead**: –õ–∏—à–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–ü–æ—Ç–æ–∫–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ**: –ù–µ –Ω—É–∂–Ω–æ –¥–ª—è 4KB –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–ª—å–∫–æ –∑–∞–º–µ–¥–ª—è–µ—Ç

## –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ AbortSignal.timeout()
```typescript
// –ë–´–õ–û (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥):
if (!externalSignal && timeoutMs) {
  return AbortSignal.timeout(timeoutMs) // –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –±–∞–≥!
}

// –°–¢–ê–õ–û (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥):
if (!externalSignal && timeoutMs) {
  const controller = new AbortController()
  const timeoutId = setTimeout(() => {
    controller.abort(new DOMException(`Request timeout after ${timeoutMs}ms`, 'TimeoutError'))
  }, timeoutMs)
  return controller.signal
}
```

### ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —á—Ç–µ–Ω–∏—è
```typescript
// –ë–´–õ–û (—Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞):
if (contentLength && parseInt(contentLength) > 1000000) { // 1MB
  // –ü–æ—Ç–æ–∫–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ AbortSignal
}

// –°–¢–ê–õ–û (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞):
const isLargeResponse = contentLengthValue > 5000000 // 5MB threshold
if (isLargeResponse) {
  // ArrayBuffer –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
} else {
  // –ü—Ä—è–º–æ–µ —á—Ç–µ–Ω–∏–µ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è
}
```

### ‚úÖ –†–µ—à–µ–Ω–∏–µ 3: –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è text()
```typescript
// –ú–µ—Ç–æ–¥ —Å —Ç–∞–π–º–∞—É—Ç–æ–º –¥–ª—è –∑–∞—â–∏—Ç—ã
const textPromise = response.text()
const timeoutPromise = new Promise<never>((_, reject) => {
  setTimeout(() => reject(new Error('text() timeout')), 5000) // 5 —Å–µ–∫ –º–∞–∫—Å–∏–º—É–º
})

text = await Promise.race([textPromise, timeoutPromise])

// Fallback –Ω–∞ ArrayBuffer –µ—Å–ª–∏ text() –∑–∞–≤–∏—Å–∞–µ—Ç
if (textPromise –∑–∞–≤–∏—Å–∞–µ—Ç) {
  const buffer = await response.arrayBuffer()
  text = new TextDecoder('utf-8').decode(buffer)
}
```

## –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: createCombinedSignal()
- **–£–±—Ä–∞–Ω–æ**: `AbortSignal.timeout()` - –∏—Å—Ç–æ—á–Ω–∏–∫ browser bugs
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –ü—Ä–æ—Å—Ç–æ–π `setTimeout()` —Å `AbortController`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò—Å–∫–ª—é—á–µ–Ω—ã race conditions –º–µ–∂–¥—É signals

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –õ–æ–≥–∏–∫–∞ —á—Ç–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
- **Threshold –∏–∑–º–µ–Ω–µ–Ω**: —Å 1MB –Ω–∞ 5MB –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ —á—Ç–µ–Ω–∏—è
- **–î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤**: –ü—Ä—è–º–æ–µ —á—Ç–µ–Ω–∏–µ —Å –∑–∞—â–∏—Ç–æ–π —Ç–∞–π–º–∞—É—Ç–æ–º
- **Fallback**: ArrayBuffer –µ—Å–ª–∏ text() –∑–∞–≤–∏—Å–∞–µ—Ç

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 3: Promise.race –∑–∞—â–∏—Ç–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: response.text() –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
- **–†–µ—à–µ–Ω–∏–µ**: Promise.race —Å 5-—Å–µ–∫—É–Ω–¥–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º
- **Backup**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ ArrayBuffer

## –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è 4KB –æ—Ç–≤–µ—Ç–∞:
- **–ë—ã–ª–æ**: 62890–º—Å (62+ —Å–µ–∫—É–Ω–¥)
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: 10-50–º—Å (–Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã**: Browser bugs —Å AbortSignal.timeout()
- **–î–æ–±–∞–≤–ª–µ–Ω—ã**: Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- **–ó–∞—â–∏—Ç–∞**: –û—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è response.text()

## –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –û–¢–õ–ê–î–ö–ê

–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
```typescript
console.log(`üîç Deepseek: –ú–∞–ª–µ–Ω—å–∫–∏–π –æ—Ç–≤–µ—Ç ${contentLengthValue} –±–∞–π—Ç, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ`)
console.log(`üîç Deepseek: –¢–µ–∫—Å—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω (–º–µ—Ç–æ–¥ 1) –∑–∞ ${textReadTime}–º—Å`)
console.warn(`üîç Deepseek: text() –∑–∞–≤–∏—Å–ª–æ, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ ArrayBuffer`)
```

## –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—Ä–∞—É–∑–µ—Ä–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Chrome, Firefox, Safari
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ performance.timing
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (>1000–º—Å)

### 2. Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –î–ª—è response.text() ‚Üí ArrayBuffer
- –î–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ ‚Üí –ø–æ—Ç–æ–∫–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ
- –î–ª—è network errors ‚Üí retry logic

### 3. –ë—É–¥—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- WebStreams API –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
- Service Workers –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- Background sync –¥–ª—è offline —Ä–µ–∂–∏–º–∞

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π:
1. **Browser bug**: AbortSignal.timeout() –≤ Chrome/Edge
2. **Race conditions**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç multiple abort signals
3. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞**: –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞:
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ browser bugs
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —á—Ç–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è —É–º–µ–Ω—å—à–∏—Ç—Å—è —Å 62+ —Å–µ–∫—É–Ω–¥ –¥–æ 10-50–º—Å –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤.