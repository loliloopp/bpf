# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

## üêõ **–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ –æ–∫–Ω–∞ "–ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞" –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
POST https://hfqgcaxmufzitdfafdlp.supabase.co/rest/v1/projects_blocks?select=* 400 (Bad Request)
null value in column "project_id" of relation "projects_blocks" violates not-null constraint
```

## üîç **–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã:**
1. ProjectCardModal –æ–∂–∏–¥–∞–ª `projectData.id`, –Ω–æ –æ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è
2. –í handleShowProjectCard –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ id –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
3. –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ id —Ç–∞–∫–∂–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ projectData

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
–í `src/pages/references/Projects.tsx` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `handleShowProjectCard`:
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ë–î **–¥–æ** –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –î–ª—è —Ä–µ–∂–∏–º–∞ 'add': —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç, –ø–æ–ª—É—á–∞–µ—Ç—Å—è –µ–≥–æ ID
- –î–ª—è —Ä–µ–∂–∏–º–∞ 'edit': –∏—Å–ø–æ–ª—å–∑–µ—Ç—Å—è ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 2. –î–æ–±–∞–≤–ª–µ–Ω ID –≤ projectCardData
- –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `projectCardData` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª—è `id`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `setProjectCardData` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `id: ''`
- –î–æ–±–∞–≤–ª–µ–Ω ID —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ProjectCardModalProps
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `id` –≤ `projectData`

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

### Projects.tsx:
```typescript
// –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
const handleShowProjectCard = () => {
  const projectData = {
    name: values.name || '',
    address: values.address || '',
    blocks: [...],
  }
  setProjectCardData(projectData)
}

// –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
const handleShowProjectCard = async () => {
  let projectId: string

  if (modalMode === 'add') {
    // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç –≤ –ë–î –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º
    const { data: projectData } = await supabase
      .from('projects')
      .insert({ name: values.name, address: values.address })
      .select()
      .single()

    projectId = projectData.id
  } else {
    projectId = currentProject.id
  }

  const projectCardDataWithId = {
    id: projectId,  // –¢–µ–ø–µ—Ä—å ID –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è!
    name: values.name || '',
    address: values.address || '',
    blocks: [...],
  }
  setProjectCardData(projectCardDataWithId)
}
```

### ProjectCardModal.tsx:
- API —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `projectData.id`
- –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ –∏ —Å–≤—è–∑–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–æ–µ–∫—Ç–∞
2. ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç–æ—á–∫—É
3. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç–æ—á–∫—É

## üìù **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–û—à–∏–±–∫–∞ `null value in column "project_id"` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞.
–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ –≤—Å–µ–º–∏ –±–ª–æ–∫–∞–º–∏, —Å—Ç–∏–ª–æ–±–∞—Ç–∞–º–∏ –∏ —Å–≤—è–∑—è–º–∏.