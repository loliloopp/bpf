# üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ: ML –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û

## ‚úÖ **–ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

### 1. **üîÑ Infinite Renders –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã**
**–§–∞–π–ª—ã:** `useMLNomenclatureSuppliers.ts`
- ‚úÖ –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ useMemo —á–µ—Ä–µ–∑ –ø–µ—Ä–≤—ã–π/–ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç—ã
- ‚úÖ –£–±—Ä–∞–ª–∏ `mlMode` –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤
- ‚úÖ –ó–∞–º–µ–Ω–∏–ª–∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ `.map().join()` –Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á

### 2. **üíæ –û—à–∏–±–∫–∞ 400 –ë–î –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**
**–§–∞–π–ª—ã:** `useTableOperations.ts` + SQL –º–∏–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `nomenclature_id = null` (ML —Ä–µ–∂–∏–º)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è SQL –º–∏–≥—Ä–∞—Ü–∏—è v2 –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è schema –ë–î
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è ML –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

### 3. **üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ**
**–§–∞–π–ª—ã:** `ChessboardTable.tsx`, `useTableOperations.ts`
- ‚úÖ –ü–æ–ª–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ ML –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç –≤—ã–±–æ—Ä–∞ –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ callback'–∞ `onNomenclatureSupplierSelect`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

## üõ†Ô∏è **–î–ï–ô–°–¢–í–ò–Ø –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:**

### **–®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é SQL –º–∏–≥—Ä–∞—Ü–∏—é**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏:
psql "YOUR_DATABASE_URL" -f sql/fix_chessboard_nomenclature_mapping_for_ml_v2.sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ Supabase Dashboard -> SQL Editor:
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ sql/fix_chessboard_nomenclature_mapping_for_ml_v2.sql
```

**–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è:**
- üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ constraints
- ‚úÖ –î–µ–ª–∞–µ—Ç `nomenclature_id` nullable –¥–ª—è ML —Ä–µ–∂–∏–º–∞
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç auto-generated UUID primary key
- ‚úÖ –°–æ–∑–¥–∞—ë—Ç UNIQUE constraints –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ FOREIGN KEY constraints

### **–®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
npm run dev
# –∏–ª–∏
npm run dev:local
```

## üéØ **–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:**

### ‚úÖ **–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:**

1. **ML –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é:**
   - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ ML –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–≤—è–∑–∞–Ω–Ω–∞—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
   - –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
   - ML –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å `nomenclature_id = null`
   - –ö–∞—Å–∫–∞–¥–Ω—ã–µ —Å–≤—è–∑–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–æ–π
   - –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω—ã –ª–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

3. **Infinite renders –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
   - –ù–µ—Ç –æ—à–∏–±–æ–∫ "Maximum update depth exceeded"

4. **–û—à–∏–±–∫–∏ 400 –ë–î –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:**
   - POST –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `chessboard_nomenclature_mapping` –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
   - –í Network DevTools –≤–∏–¥–Ω—ã —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã 200/201

## üîç **–ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨:**

### **–°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:5174/documents/chessboard
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏
3. –ö–ª–∏–∫–Ω—É—Ç—å –≤ –ø–æ–ª–µ "–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞"
4. –í—ã–±—Ä–∞—Ç—å ML –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –∏–∫–æ–Ω–∫–æ–π ü§ñ
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ü–æ–ª–µ "–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏–ª–æ—Å—å
6. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
7. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

### **–õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```
üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: onNomenclatureSupplierSelect –í–´–ó–í–ê–ù
üîç ML –ê–í–¢–û–ó–ê–ü–û–õ–ù–ï–ù–ò–ï: –ü–æ–∏—Å–∫ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã —á–µ—Ä–µ–∑ API
‚úÖ ML –ê–í–¢–û–ó–ê–ü–û–õ–ù–ï–ù–ò–ï: –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞
üíæ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ chessboard_nomenclature_mapping (mode: ML-only)
```

## üìä **–°–¢–ê–¢–£–° –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:**

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|----------|---------|----------|
| ‚ùå Infinite renders | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
| ‚ùå –û—à–∏–±–∫–∞ 400 –ë–î | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | SQL –º–∏–≥—Ä–∞—Ü–∏—è + –∫–æ–¥ |
| ‚ùå ML –Ω–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | Callback —Ä–∞–±–æ—Ç–∞–µ—Ç |
| ‚ùå ML –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ null nomenclature_id |

## üöÄ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

**üéâ ML –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!**

- ‚úÖ ML –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞—é—Ç –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ Infinite renders —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**