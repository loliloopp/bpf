# –ö—Ä–∞—Ç–∫–∏–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Chessboard –¥–ª—è 20K+ —Å—Ç—Ä–æ–∫

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –î–ï–ô–°–¢–í–ò–Ø - –í–´–ü–û–õ–ù–ò–¢–¨ –ù–ï–ú–ï–î–õ–ï–ù–ù–û

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î (15 –º–∏–Ω—É—Ç)
```bash
# –§–∞–π–ª: sql/chessboard_performance_indexes.sql
psql "$SUPABASE_DB_URL" -f sql/chessboard_performance_indexes.sql
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 3-5 —Ä–∞–∑

### 2. –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é (2 —á–∞—Å–∞)
**–§–∞–π–ª—ã**:
- `src/pages/documents/Chessboard/types/index.ts` - –¥–æ–±–∞–≤–∏—Ç—å PaginationParams
- `src/pages/documents/Chessboard/hooks/useChessboardData.ts` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ 100-500 –∑–∞–ø–∏—Å–µ–π –≤–º–µ—Å—Ç–æ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ 20K

### 3. –ó–∞–º–µ–Ω–∏—Ç—å N+1 –∑–∞–ø—Ä–æ—Å—ã –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (4 —á–∞—Å–∞)
**–§–∞–π–ª**: `sql/chessboard_optimized_queries.sql` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `get_chessboard_data_optimized`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 1 –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ 4, —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ network latency –≤ 4 —Ä–∞–∑–∞

## üìä –û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù–ù–´–ï

### 1. N+1 Query Anti-Pattern
**–°–µ–π—á–∞—Å**: 4 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
```typescript
1. rawData (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
2. documentationData (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
3. floorsData (—ç—Ç–∞–∂–∏)
4. ratesData (—Ä–∞—Å—Ü–µ–Ω–∫–∏)
```

### 2. URL Length Overflow
**–°–µ–π—á–∞—Å**: –ë–∞—Ç—á–∏–Ω–≥ –ø–æ 50 ID —Å–æ–∑–¥–∞–µ—Ç URL –¥–ª–∏–Ω–æ–π 1800+ —Å–∏–º–≤–æ–ª–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: HTTP 414 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –≤—ã–±–æ—Ä–∫–∞—Ö

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
**–°–µ–π—á–∞—Å**: –ñ–µ—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç 1000 —Å—Ç—Ä–æ–∫
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–æ–µ–∫—Ç—ã 20K+ –∑–∞–ø–∏—Å–µ–π –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –ª–∏–º–∏—Ç

### 4. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤
**–°–µ–π—á–∞—Å**: ~120MB –ø–∞–º—è—Ç–∏ –¥–ª—è 20K –∑–∞–ø–∏—Å–µ–π (3 –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö)
**–ü—Ä–æ–±–ª–µ–º–∞**: –ë—Ä–∞—É–∑–µ—Ä —Ç–æ—Ä–º–æ–∑–∏—Ç –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

| –ú–µ—Ç—Ä–∏–∫–∞ | –°–µ–π—á–∞—Å | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|---------|-------------------|-----------|
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ | 10-15 —Å–µ–∫ | 2-3 —Å–µ–∫ | 70% ‚Üì |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | ~120MB | ~30MB | 60% ‚Üì |
| –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã | 4 –∑–∞–ø—Ä–æ—Å–∞ | 1 –∑–∞–ø—Ä–æ—Å | 75% ‚Üì |
| –û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å UI | –õ–∞–≥–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ | –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ | 90% ‚Üë |

## üìã –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ü–û –ü–†–ò–û–†–ò–¢–ï–¢–ê–ú

### –ù–ï–î–ï–õ–Ø 1 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò üî•
- [x] –î–µ–Ω—å 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î
- [ ] –î–Ω–∏ 2-3: –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- [ ] –î–Ω–∏ 4-5: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å N+1 problem

### –ù–ï–î–ï–õ–Ø 2 - –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è React Query –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] Prefetching —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] Batch loading —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

### –ù–ï–î–ï–õ–Ø 3 - UI –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø
- [ ] –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã (@tanstack/react-virtual)
- [ ] –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π —Å—Ç—Ä–æ–∫
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–º–æ–∏–∑–∞—Ü–∏–∏

### –ù–ï–î–ï–õ–Ø 4 - –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
- [ ] –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Playwright)
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üõ†Ô∏è –ì–û–¢–û–í–´–ï –§–ê–ô–õ–´ –î–õ–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

1. **`sql/chessboard_performance_indexes.sql`** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –ë–î
2. **`sql/chessboard_optimized_queries.sql`** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL —Ñ—É–Ω–∫—Ü–∏–∏
3. **`temp/CHESSBOARD_PERFORMANCE_ANALYSIS.md`** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
4. **`temp/PAGINATION_STRATEGY.md`** - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
5. **`temp/IMPLEMENTATION_PLAN.md`** - –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã (–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å)
```bash
psql "$SUPABASE_DB_URL" -f sql/chessboard_performance_indexes.sql
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ
```sql
EXPLAIN ANALYZE
SELECT * FROM chessboard
WHERE project_id = 'your-project-uuid'
ORDER BY created_at DESC
LIMIT 1000;
```

### –®–∞–≥ 3: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é (—ç—Ç–æ—Ç —Å–ø—Ä–∏–Ω—Ç)
–°–ª–µ–¥–æ–≤–∞—Ç—å –ø–ª–∞–Ω—É –≤ `temp/IMPLEMENTATION_PLAN.md` - –≠—Ç–∞–ø 1.2

## üéØ –ö–û–ù–¢–†–û–õ–¨–ù–´–ï –¢–û–ß–ö–ò

- **–ü–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–æ–≤**: –ó–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è < 1 —Å–µ–∫—É–Ω–¥—ã
- **–ü–æ—Å–ª–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏**: –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è < 3 —Å–µ–∫—É–Ω–¥
- **–ü–æ—Å–ª–µ N+1 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–æ–ª—å–∫–æ 1 network –∑–∞–ø—Ä–æ—Å
- **–§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–ª—å**: 20K –ø—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∑–∞ 2-3 —Å–µ–∫—É–Ω–¥—ã

## üö® PLAN B (–û–¢–ö–ê–¢)

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫:
```typescript
// Feature flags –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
const USE_OPTIMIZED_QUERIES = false
const USE_PAGINATION = false
const USE_VIRTUALIZATION = false
```

```sql
-- –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
DROP INDEX CONCURRENTLY idx_chessboard_project_performance;
```