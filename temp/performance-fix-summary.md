# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üêõ **–ü—Ä–æ–±–ª–µ–º—ã:**
1. –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –≤ ProjectCardModal –∏–∑-–∑–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
2. –û—à–∏–±–∫–∞ 400 Bad Request –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ç–∞–∂–µ–π –±–ª–æ–∫–æ–≤ –≤ block_floor_mapping
3. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –≤ ProjectCardModal
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `useMemo` –∏–∑ React
- –û–±—ë—Ä–Ω—É—Ç—ã `createBuildingTableData()` –∏ `createTableColumns()` –≤ `useMemo`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ `console.log` –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π —Ç–∞–±–ª–∏—Ü—ã

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–≤–µ–¥–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `Project` –∏ `Block` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å—Ö–µ–º–æ–π –ë–î (—É–¥–∞–ª–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è `created_at`, `updated_at`)
- –ó–∞–º–µ–Ω—ë–Ω `insert()` –Ω–∞ `upsert()` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ –ë–î
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –æ—à–∏–±–æ–∫

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `upsert` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `onConflict: 'block_id,floor_number'`
- –î–æ–±–∞–≤–ª–µ–Ω—ã try-catch –±–ª–æ–∫–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ–∑–¥–∞–Ω–∏—è –±–ª–æ–∫–æ–≤ –∏ —ç—Ç–∞–∂–µ–π

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

### ProjectCardModal.tsx:
```typescript
// –ë—ã–ª–æ
const tableData = createBuildingTableData()
const tableColumns = createTableColumns()

// –°—Ç–∞–ª–æ
const tableData = useMemo(() => {
  // –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
}, [blocks, stylobates, undergroundParking])

const tableColumns = useMemo(() => {
  // –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
}, [blocks])
```

### projects-api.ts:
```typescript
// –ë—ã–ª–æ
const { data, error } = await supabase.from('block_floor_mapping').insert(floorsData).select()

// –°—Ç–∞–ª–æ
const { error } = await supabase
  .from('block_floor_mapping')
  .upsert(floorsData, {
    onConflict: 'block_id,floor_number',
    ignoreDuplicates: false
  })
```

### types.ts:
```typescript
// –ë—ã–ª–æ
export interface Project {
  id: string
  name: string
  address: string
  created_at: string  // <- —É–¥–∞–ª–µ–Ω–æ
  updated_at: string  // <- —É–¥–∞–ª–µ–Ω–æ
}

// –°—Ç–∞–ª–æ
export interface Project {
  id: string
  name: string
  address: string
}
```

## üß™ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ProjectCardModal
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ 400 Bad Request –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ç–∞–∂–µ–π
- –ü—Ä–∏–≤–µ–¥–µ–Ω—ã TypeScript —Ç–∏–ø—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π –ë–î
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π
- –£–ª—É—á—à–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ